<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Trimint - Telegram Mining App</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
    
    <!-- Telegram Web App API -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- TON Connect -->
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #4A6FFF;
            --secondary-color: #6B5FFF;
            --accent-color: #FFB800;
            --background-color: #F5F7FF;
            --card-color: #FFFFFF;
            --text-primary: #333333;
            --text-secondary: #666666;
            --border-color: #E0E8FF;
            --success-color: #4CAF50;
            --warning-color: #FF9800;
            --error-color: #F44336;
            --gradient-primary: linear-gradient(135deg, #4A6FFF 0%, #6B5FFF 100%);
            --gradient-secondary: linear-gradient(135deg, #FFB800 0%, #FF8A00 100%);
        }
        
        [data-theme="dark"] {
            --primary-color: #5A7FFF;
            --secondary-color: #7B6FFF;
            --accent-color: #FFC819;
            --background-color: #1A1B2E;
            --card-color: #232537;
            --text-primary: #F5F7FF;
            --text-secondary: #B0B3C8;
            --border-color: #2D3050;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background-color: var(--background-color);
            color: var(--text-primary);
            padding-bottom: 80px;
            transition: background-color 0.3s, color 0.3s;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 100%;
            padding: 0 15px;
            margin: 0 auto;
        }
        
        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--background-color);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s, visibility 0.5s;
        }
        
        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid var(--border-color);
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .referral-message {
            text-align: center;
            margin-top: 20px;
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        /* Header */
        .header {
            padding: 15px 0;
            background: var(--gradient-primary);
            color: white;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .balance-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .coin-icon {
            width: 30px;
            height: 30px;
        }
        
        .balance {
            font-size: 18px;
            font-weight: 600;
        }
        
        .theme-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 20px;
            padding: 8px 15px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Content Sections */
        .content-section {
            display: none;
            padding: 20px 0;
            animation: fadeIn 0.5s;
        }
        
        .content-section.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Home Section */
        .home-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 0;
        }
        
        .coin-container {
            position: relative;
            margin-bottom: 30px;
        }
        
        .main-coin {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: var(--gradient-secondary);
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 10px 30px rgba(255, 184, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .main-coin img {
            width: 140px;
            height: 140px;
            object-fit: contain;
        }
        
        .farming-indicator {
            position: absolute;
            top: -10px;
            right: -10px;
            background: var(--success-color);
            color: white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .farming-timer {
            text-align: center;
            margin-bottom: 20px;
            font-size: 16px;
            color: var(--text-secondary);
        }
        
        .farm-button {
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 30px;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(74, 111, 255, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .farm-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(74, 111, 255, 0.4);
        }
        
        .farm-button:active {
            transform: translateY(1px);
        }
        
        .farm-button:disabled {
            background: var(--border-color);
            color: var(--text-secondary);
            cursor: not-allowed;
            box-shadow: none;
        }
        
        .earnings-animation {
            position: absolute;
            color: var(--success-color);
            font-weight: bold;
            font-size: 18px;
            animation: floatUp 2s forwards;
            pointer-events: none;
        }
        
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        
        /* Tasks Section */
        .tasks-header {
            margin-bottom: 20px;
        }
        
        .tasks-header h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .watch-ads-card {
            background: var(--card-color);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .watch-ads-info {
            flex: 1;
        }
        
        .watch-ads-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .watch-ads-reward {
            color: var(--accent-color);
            font-weight: 500;
        }
        
        .watch-ads-button {
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .watch-ads-button:hover {
            transform: scale(1.05);
        }
        
        .task-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .task-card {
            background: var(--card-color);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            display: flex;
            gap: 15px;
        }
        
        .task-image {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            object-fit: cover;
        }
        
        .task-info {
            flex: 1;
        }
        
        .task-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .task-reward {
            color: var(--accent-color);
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .task-description {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .task-button {
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 15px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .task-button:hover {
            transform: scale(1.05);
        }
        
        .task-button.processing {
            background: var(--warning-color);
        }
        
        .task-button.completed {
            background: var(--success-color);
        }
        
        /* Leaderboard Section */
        .leaderboard-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .leaderboard-header h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .leaderboard-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .leaderboard-tab {
            background: var(--card-color);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 8px 20px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .leaderboard-tab.active {
            background: var(--gradient-primary);
            color: white;
            border-color: transparent;
        }
        
        .leaderboard-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .leaderboard-item {
            background: var(--card-color);
            border-radius: 15px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .leaderboard-rank {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 600;
        }
        
        .leaderboard-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .leaderboard-info {
            flex: 1;
        }
        
        .leaderboard-name {
            font-weight: 600;
            margin-bottom: 3px;
        }
        
        .leaderboard-level {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .leaderboard-balance {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: 600;
        }
        
        .leaderboard-coin {
            width: 20px;
            height: 20px;
        }
        
        /* Friends Section */
        .friends-header {
            margin-bottom: 20px;
        }
        
        .friends-header h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .referral-card {
            background: var(--gradient-primary);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(74, 111, 255, 0.3);
        }
        
        .referral-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .referral-link-container {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .referral-link {
            flex: 1;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 10px;
            padding: 10px 15px;
            color: white;
            font-size: 14px;
        }
        
        .copy-button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 10px;
            padding: 10px 15px;
            color: white;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .copy-button:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .referral-stats {
            display: flex;
            justify-content: space-between;
        }
        
        .referral-stat {
            text-align: center;
        }
        
        .referral-stat-value {
            font-size: 24px;
            font-weight: 700;
        }
        
        .referral-stat-label {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .friends-list {
            margin-top: 20px;
        }
        
        .friends-list h3 {
            font-size: 18px;
            margin-bottom: 15px;
        }
        
        .friend-item {
            background: var(--card-color);
            border-radius: 15px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .friend-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .friend-info {
            flex: 1;
        }
        
        .friend-name {
            font-weight: 600;
            margin-bottom: 3px;
        }
        
        .friend-earned {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .friend-bonus {
            color: var(--accent-color);
            font-weight: 600;
        }
        
        /* Profile Section */
        .profile-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 15px;
            border: 4px solid var(--primary-color);
        }
        
        .profile-name {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .profile-level {
            background: var(--gradient-primary);
            color: white;
            border-radius: 20px;
            padding: 5px 15px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .profile-stat-card {
            background: var(--card-color);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .profile-stat-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .profile-stat-label {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .wallet-section {
            background: var(--card-color);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .wallet-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .wallet-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        .wallet-status {
            font-size: 14px;
            padding: 5px 10px;
            border-radius: 10px;
            background: var(--error-color);
            color: white;
        }
        
        .wallet-status.connected {
            background: var(--success-color);
        }
        
        .wallet-address {
            background: var(--background-color);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            word-break: break-all;
            font-family: monospace;
            font-size: 14px;
            display: none;
        }
        
        .wallet-address.visible {
            display: block;
        }
        
        .wallet-buttons {
            display: flex;
            gap: 10px;
        }
        
        .wallet-button {
            flex: 1;
            border: none;
            border-radius: 10px;
            padding: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .wallet-button:hover {
            transform: scale(1.05);
        }
        
        .connect-wallet {
            background: var(--gradient-primary);
            color: white;
        }
        
        .copy-wallet {
            background: var(--background-color);
            color: var(--text-primary);
        }
        
        .disconnect-wallet {
            background: var(--error-color);
            color: white;
        }
        
        .settings-section {
            background: var(--card-color);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .settings-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .settings-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .setting-label {
            font-weight: 500;
        }
        
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
            background: var(--border-color);
            border-radius: 13px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .toggle-switch.active {
            background: var(--primary-color);
        }
        
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }
        
        .toggle-switch.active::after {
            transform: translateX(24px);
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--card-color);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 100;
        }
        
        .nav-button {
            background: none;
            border: none;
            color: var(--text-secondary);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            padding: 5px;
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .nav-button.active {
            color: var(--primary-color);
        }
        
        .nav-button.home {
            position: relative;
        }
        
        .nav-button.home .nav-icon {
            width: 35px;
            height: 35px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            margin-bottom: 5px;
        }
        
        .nav-icon {
            font-size: 20px;
        }
        
        .nav-label {
            font-size: 12px;
            font-weight: 500;
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--card-color);
            color: var(--text-primary);
            padding: 15px 25px;
            border-radius: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transition: transform 0.3s, opacity 0.3s;
            z-index: 1000;
            max-width: 80%;
            text-align: center;
        }
        
        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
        
        /* Responsive */
        @media (max-width: 480px) {
            .profile-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-spinner"></div>
        <div class="referral-message" id="referralMessage"></div>
    </div>
    
    <!-- Header -->
    <div class="header">
        <div class="container">
            <div class="header-content">
                <div class="balance-container">
                    <img src="https://i.postimg.cc/fTQktNmX/maincoin.png" alt="TRM" class="coin-icon">
                    <div class="balance" id="userBalance">0 TRM</div>
                </div>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon" id="themeIcon"></i>
                    <span id="themeText">Dark</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Content Sections -->
    <div class="container">
        <!-- Home Section -->
        <div class="content-section active" id="homeSection">
            <div class="home-container">
                <div class="coin-container">
                    <div class="main-coin" id="mainCoin">
                        <img src="https://i.postimg.cc/fTQktNmX/maincoin.png" alt="TRM">
                        <div class="farming-indicator" id="farmingIndicator" style="display: none;">
                            <i class="fas fa-check"></i>
                        </div>
                    </div>
                </div>
                <div class="farming-timer" id="farmingTimer"></div>
                <button class="farm-button" id="farmButton">Start Farming</button>
            </div>
        </div>
        
        <!-- Tasks Section -->
        <div class="content-section" id="tasksSection">
            <div class="tasks-header">
                <h2>Tasks</h2>
            </div>
            
            <div class="watch-ads-card">
                <div class="watch-ads-info">
                    <div class="watch-ads-title">Watch Ads</div>
                    <div class="watch-ads-reward">+1 TRM for each ad watched</div>
                </div>
                <button class="watch-ads-button" id="watchAdsButton">Watch</button>
            </div>
            
            <div class="task-list" id="taskList">
                <!-- Tasks will be loaded here from Firebase -->
            </div>
        </div>
        
        <!-- Leaderboard Section -->
        <div class="content-section" id="leaderboardSection">
            <div class="leaderboard-header">
                <h2>Leaderboard</h2>
            </div>
            
            <div class="leaderboard-tabs">
                <div class="leaderboard-tab active" data-period="daily">Daily</div>
                <div class="leaderboard-tab" data-period="weekly">Weekly</div>
                <div class="leaderboard-tab" data-period="all">All Time</div>
            </div>
            
            <div class="leaderboard-list" id="leaderboardList">
                <!-- Leaderboard items will be loaded here from Firebase -->
            </div>
        </div>
        
        <!-- Friends Section -->
        <div class="content-section" id="friendsSection">
            <div class="friends-header">
                <h2>Friends</h2>
            </div>
            
            <div class="referral-card">
                <div class="referral-title">Invite Friends</div>
                <div class="referral-link-container">
                    <input type="text" class="referral-link" id="referralLink" readonly>
                    <button class="copy-button" id="copyReferralButton">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
                <div class="referral-stats">
                    <div class="referral-stat">
                        <div class="referral-stat-value" id="totalReferrals">0</div>
                        <div class="referral-stat-label">Friends</div>
                    </div>
                    <div class="referral-stat">
                        <div class="referral-stat-value" id="referralEarnings">0</div>
                        <div class="referral-stat-label">Earned</div>
                    </div>
                </div>
            </div>
            
            <div class="friends-list">
                <h3>Your Referrals</h3>
                <div id="friendsList">
                    <!-- Friends will be loaded here from Firebase -->
                </div>
            </div>
        </div>
        
        <!-- Profile Section -->
        <div class="content-section" id="profileSection">
            <div class="profile-header">
                <img src="" alt="Profile" class="profile-avatar" id="profileAvatar">
                <div class="profile-name" id="profileName">User</div>
                <div class="profile-level" id="profileLevel">Bronze</div>
            </div>
            
            <div class="profile-stats">
                <div class="profile-stat-card">
                    <div class="profile-stat-value" id="totalBalance">0</div>
                    <div class="profile-stat-label">Total Balance</div>
                </div>
                <div class="profile-stat-card">
                    <div class="profile-stat-value" id="totalEarned">0</div>
                    <div class="profile-stat-label">Total Earned</div>
                </div>
                <div class="profile-stat-card">
                    <div class="profile-stat-value" id="totalFriends">0</div>
                    <div class="profile-stat-label">Total Friends</div>
                </div>
                <div class="profile-stat-card">
                    <div class="profile-stat-value" id="totalTasks">0</div>
                    <div class="profile-stat-label">Tasks Done</div>
                </div>
            </div>
            
            <div class="wallet-section">
                <div class="wallet-header">
                    <div class="wallet-title">TON Wallet</div>
                    <div class="wallet-status" id="walletStatus">Not Connected</div>
                </div>
                <div class="wallet-address" id="walletAddress"></div>
                <div class="wallet-buttons">
                    <button class="wallet-button connect-wallet" id="connectWalletButton">Connect Wallet</button>
                    <button class="wallet-button copy-wallet" id="copyWalletButton" style="display: none;">Copy Address</button>
                    <button class="wallet-button disconnect-wallet" id="disconnectWalletButton" style="display: none;">Disconnect</button>
                </div>
            </div>
            
            <div class="settings-section">
                <div class="settings-title">Settings</div>
                <div class="settings-list">
                    <div class="setting-item">
                        <div class="setting-label">Notifications</div>
                        <div class="toggle-switch active" id="notificationsToggle"></div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">Sound Effects</div>
                        <div class="toggle-switch active" id="soundToggle"></div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">Auto Farming</div>
                        <div class="toggle-switch" id="autoFarmingToggle"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <button class="nav-button home active" data-section="home">
            <div class="nav-icon">
                <i class="fas fa-home"></i>
            </div>
            <span class="nav-label">Home</span>
        </button>
        <button class="nav-button" data-section="tasks">
            <div class="nav-icon">
                <i class="fas fa-tasks"></i>
            </div>
            <span class="nav-label">Tasks</span>
        </button>
        <button class="nav-button" data-section="leaderboard">
            <div class="nav-icon">
                <i class="fas fa-trophy"></i>
            </div>
            <span class="nav-label">Leaderboard</span>
        </button>
        <button class="nav-button" data-section="friends">
            <div class="nav-icon">
                <i class="fas fa-user-friends"></i>
            </div>
            <span class="nav-label">Friends</span>
        </button>
        <button class="nav-button" data-section="profile">
            <div class="nav-icon">
                <i class="fas fa-user"></i>
            </div>
            <span class="nav-label">Profile</span>
        </button>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>
    
    <!-- Monetag Ads Script -->
    <script src='//libtl.com/sdk.js' data-zone='10290264' data-sdk='show_10290264'></script>
    
    <script>
        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAt9PRbvok0g5XL4187btrPvGx6VjfurJU",
            authDomain: "msc-by-shawon.firebaseapp.com",
            projectId: "msc-by-shawon",
            storageBucket: "msc-by-shawon.firebasestorage.app",
            messagingSenderId: "432753389120",
            appId: "1:432753389120:web:dcbb46ca39408a405579a5",
            measurementId: "G-8LHGLJSSEE"
        };
        
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();
        
        // TON Connect
        const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
            manifestUrl: 'https://trimint.vercel.app/tonconnect-manifest.json',
            buttonRootId: null
        });
        
        // App State
        let currentUser = null;
        let userData = null;
        let farmingInterval = null;
        let farmingEndTime = null;
        let tasks = [];
        let leaderboardData = [];
        let friendsData = [];
        
        // DOM Elements
        const sections = document.querySelectorAll('.content-section');
        const navButtons = document.querySelectorAll('.nav-button');
        const loadingScreen = document.getElementById('loadingScreen');
        const referralMessage = document.getElementById('referralMessage');
        const userBalance = document.getElementById('userBalance');
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const themeText = document.getElementById('themeText');
        const mainCoin = document.getElementById('mainCoin');
        const farmingIndicator = document.getElementById('farmingIndicator');
        const farmingTimer = document.getElementById('farmingTimer');
        const farmButton = document.getElementById('farmButton');
        const taskList = document.getElementById('taskList');
        const watchAdsButton = document.getElementById('watchAdsButton');
        const leaderboardTabs = document.querySelectorAll('.leaderboard-tab');
        const leaderboardList = document.getElementById('leaderboardList');
        const referralLink = document.getElementById('referralLink');
        const copyReferralButton = document.getElementById('copyReferralButton');
        const totalReferrals = document.getElementById('totalReferrals');
        const referralEarnings = document.getElementById('referralEarnings');
        const friendsList = document.getElementById('friendsList');
        const profileAvatar = document.getElementById('profileAvatar');
        const profileName = document.getElementById('profileName');
        const profileLevel = document.getElementById('profileLevel');
        const totalBalance = document.getElementById('totalBalance');
        const totalEarned = document.getElementById('totalEarned');
        const totalFriends = document.getElementById('totalFriends');
        const totalTasks = document.getElementById('totalTasks');
        const walletStatus = document.getElementById('walletStatus');
        const walletAddress = document.getElementById('walletAddress');
        const connectWalletButton = document.getElementById('connectWalletButton');
        const copyWalletButton = document.getElementById('copyWalletButton');
        const disconnectWalletButton = document.getElementById('disconnectWalletButton');
        const notificationsToggle = document.getElementById('notificationsToggle');
        const soundToggle = document.getElementById('soundToggle');
        const autoFarmingToggle = document.getElementById('autoFarmingToggle');
        const toast = document.getElementById('toast');
        
        // Initialize App
        function initApp() {
            // Get Telegram user data
            currentUser = tg.initDataUnsafe.user;
            
            if (!currentUser) {
                // For testing outside Telegram
                currentUser = {
                    id: 123456789,
                    first_name: 'Test',
                    last_name: 'User',
                    username: 'testuser',
                    photo_url: 'https://via.placeholder.com/100'
                };
            }
            
            // Check for referral
            const urlParams = new URLSearchParams(window.location.search);
            const referrerId = urlParams.get('startapp');
            
            if (referrerId && referrerId !== currentUser.id.toString()) {
                // Show referral message
                referralMessage.textContent = `You were invited by a friend!`;
                
                // Process referral after a short delay
                setTimeout(() => {
                    processReferral(referrerId);
                }, 2000);
            } else {
                // Hide loading screen immediately
                setTimeout(() => {
                    loadingScreen.classList.add('hidden');
                }, 1000);
            }
            
            // Load user data
            loadUserData();
            
            // Set up navigation
            setupNavigation();
            
            // Set up theme toggle
            setupThemeToggle();
            
            // Set up farming
            setupFarming();
            
            // Set up tasks
            setupTasks();
            
            // Set up leaderboard
            setupLeaderboard();
            
            // Set up friends
            setupFriends();
            
            // Set up profile
            setupProfile();
            
            // Set up wallet
            setupWallet();
            
            // Set up settings
            setupSettings();
            
            // Load data from Firebase
            loadTasks();
            loadLeaderboard();
            loadFriends();
        }
        
        // Load User Data
        function loadUserData() {
            const userRef = database.ref(`users/${currentUser.id}`);
            
            userRef.once('value', (snapshot) => {
                if (snapshot.exists()) {
                    userData = snapshot.val();
                } else {
                    // Create new user
                    userData = {
                        id: currentUser.id,
                        firstName: currentUser.first_name,
                        lastName: currentUser.last_name || '',
                        username: currentUser.username || '',
                        photoUrl: currentUser.photo_url || '',
                        balance: 0,
                        totalEarned: 0,
                        level: 'Bronze',
                        friends: [],
                        tasksCompleted: [],
                        farmingEndTime: null,
                        walletAddress: null,
                        settings: {
                            notifications: true,
                            sound: true,
                            autoFarming: false,
                            theme: 'light'
                        }
                    };
                    
                    // Save to Firebase
                    userRef.set(userData);
                }
                
                // Update UI with user data
                updateUI();
            });
            
            // Listen for changes
            userRef.on('value', (snapshot) => {
                if (snapshot.exists()) {
                    userData = snapshot.val();
                    updateUI();
                }
            });
        }
        
        // Update UI with user data
        function updateUI() {
            if (!userData) return;
            
            // Update balance
            userBalance.textContent = `${userData.balance.toFixed(3)} TRM`;
            totalBalance.textContent = userData.balance.toFixed(3);
            totalEarned.textContent = userData.totalEarned.toFixed(3);
            
            // Update level
            updateLevel();
            
            // Update profile
            profileAvatar.src = userData.photoUrl || 'https://via.placeholder.com/100';
            profileName.textContent = `${userData.firstName} ${userData.lastName}`;
            
            // Update friends count
            totalFriends.textContent = userData.friends.length;
            
            // Update tasks count
            totalTasks.textContent = userData.tasksCompleted.length;
            
            // Update referral link
            referralLink.value = `https://t.me/TrimintBot/mine?startapp=${currentUser.id}`;
            
            // Update referral stats
            totalReferrals.textContent = userData.friends.length;
            referralEarnings.textContent = (userData.friends.length * 5000).toFixed(3);
            
            // Update wallet status
            if (userData.walletAddress) {
                walletStatus.textContent = 'Connected';
                walletStatus.classList.add('connected');
                walletAddress.textContent = userData.walletAddress;
                walletAddress.classList.add('visible');
                connectWalletButton.style.display = 'none';
                copyWalletButton.style.display = 'block';
                disconnectWalletButton.style.display = 'block';
            }
            
            // Update farming state
            if (userData.farmingEndTime && userData.farmingEndTime > Date.now()) {
                startFarmingUI(userData.farmingEndTime);
            }
            
            // Update settings
            if (userData.settings.theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeIcon.className = 'fas fa-sun';
                themeText.textContent = 'Light';
            }
            
            notificationsToggle.classList.toggle('active', userData.settings.notifications);
            soundToggle.classList.toggle('active', userData.settings.sound);
            autoFarmingToggle.classList.toggle('active', userData.settings.autoFarming);
        }
        
        // Update user level based on balance
        function updateLevel() {
            let level = 'Bronze';
            
            if (userData.balance >= 50000) {
                level = 'Diamond';
            } else if (userData.balance >= 10000) {
                level = 'Gold';
            }
            
            userData.level = level;
            profileLevel.textContent = level;
            
            // Update in Firebase
            database.ref(`users/${currentUser.id}/level`).set(level);
        }
        
        // Process Referral
        function processReferral(referrerId) {
            const referrerRef = database.ref(`users/${referrerId}`);
            
            referrerRef.once('value', (snapshot) => {
                if (snapshot.exists()) {
                    const referrerData = snapshot.val();
                    
                    // Check if current user is already in referrer's friends list
                    if (!referrerData.friends.includes(currentUser.id)) {
                        // Add current user to referrer's friends list
                        referrerData.friends.push(currentUser.id);
                        
                        // Add referral bonus to referrer's balance
                        referrerData.balance += 5000;
                        referrerData.totalEarned += 5000;
                        
                        // Update referrer data
                        referrerRef.update({
                            friends: referrerData.friends,
                            balance: referrerData.balance,
                            totalEarned: referrerData.totalEarned
                        });
                        
                        // Show success message
                        showToast(`Referral processed! Your friend got 5000 TRM.`);
                    }
                }
                
                // Hide loading screen
                setTimeout(() => {
                    loadingScreen.classList.add('hidden');
                }, 1000);
            });
        }
        
        // Setup Navigation
        function setupNavigation() {
            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const section = button.getAttribute('data-section');
                    
                    // Update active button
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Show corresponding section
                    sections.forEach(sec => sec.classList.remove('active'));
                    document.getElementById(`${section}Section`).classList.add('active');
                });
            });
        }
        
        // Setup Theme Toggle
        function setupThemeToggle() {
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                document.documentElement.setAttribute('data-theme', newTheme);
                
                if (newTheme === 'dark') {
                    themeIcon.className = 'fas fa-sun';
                    themeText.textContent = 'Light';
                } else {
                    themeIcon.className = 'fas fa-moon';
                    themeText.textContent = 'Dark';
                }
                
                // Update user settings
                userData.settings.theme = newTheme;
                database.ref(`users/${currentUser.id}/settings/theme`).set(newTheme);
            });
        }
        
        // Setup Farming
        function setupFarming() {
            farmButton.addEventListener('click', () => {
                if (farmingInterval) {
                    // Already farming
                    return;
                }
                
                // Start farming for 12 hours
                const endTime = Date.now() + (12 * 60 * 60 * 1000); // 12 hours in milliseconds
                
                // Update in Firebase
                database.ref(`users/${currentUser.id}/farmingEndTime`).set(endTime);
                
                // Start farming UI
                startFarmingUI(endTime);
            });
        }
        
        function startFarmingUI(endTime) {
            farmingEndTime = endTime;
            
            // Show farming indicator
            farmingIndicator.style.display = 'flex';
            
            // Update button
            farmButton.textContent = 'Farming...';
            farmButton.disabled = true;
            
            // Start timer
            updateFarmingTimer();
            farmingInterval = setInterval(updateFarmingTimer, 1000);
            
            // Start earning
            startEarning();
        }
        
        function updateFarmingTimer() {
            if (!farmingEndTime) return;
            
            const now = Date.now();
            const remaining = Math.max(0, farmingEndTime - now);
            
            if (remaining === 0) {
                // Farming complete
                stopFarming();
                return;
            }
            
            // Calculate hours, minutes, seconds
            const hours = Math.floor(remaining / (1000 * 60 * 60));
            const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((remaining % (1000 * 60)) / 1000);
            
            // Update timer display
            farmingTimer.textContent = `Farming ends in: ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function startEarning() {
            // Earn 0.001 TRM per second
            const earnInterval = setInterval(() => {
                if (!farmingEndTime) {
                    clearInterval(earnInterval);
                    return;
                }
                
                const now = Date.now();
                if (now >= farmingEndTime) {
                    clearInterval(earnInterval);
                    return;
                }
                
                // Update balance in Firebase
                database.ref(`users/${currentUser.id}/balance`).set(firebase.database.ServerValue.increment(0.001));
                database.ref(`users/${currentUser.id}/totalEarned`).set(firebase.database.ServerValue.increment(0.001));
                
                // Show earning animation
                showEarningAnimation();
            }, 1000);
        }
        
        function showEarningAnimation() {
            const animation = document.createElement('div');
            animation.className = 'earnings-animation';
            animation.textContent = '+0.001 TRM';
            
            // Random position around the coin
            const randomX = Math.random() * 40 - 20;
            const randomY = Math.random() * 40 - 20;
            
            animation.style.left = `calc(50% + ${randomX}px)`;
            animation.style.top = `calc(50% + ${randomY}px)`;
            
            mainCoin.appendChild(animation);
            
            // Remove animation after it completes
            setTimeout(() => {
                animation.remove();
            }, 2000);
        }
        
        function stopFarming() {
            // Clear farming interval
            if (farmingInterval) {
                clearInterval(farmingInterval);
                farmingInterval = null;
            }
            
            // Update UI
            farmingIndicator.style.display = 'none';
            farmingTimer.textContent = '';
            farmButton.textContent = 'Start Farming';
            farmButton.disabled = false;
            
            // Clear farming end time in Firebase
            database.ref(`users/${currentUser.id}/farmingEndTime`).set(null);
            
            // Show notification
            showToast('Farming completed! Start farming again to earn more TRM.');
            
            // Check for auto-farming setting
            if (userData.settings.autoFarming) {
                // Start farming again after a short delay
                setTimeout(() => {
                    farmButton.click();
                }, 3000);
            }
        }
        
        // Setup Tasks
        function setupTasks() {
            watchAdsButton.addEventListener('click', () => {
                // Show ad
                if (window.show_10290264) {
                    window.show_10290264();
                    
                    // Update button state
                    watchAdsButton.textContent = 'Watching...';
                    watchAdsButton.disabled = true;
                    
                    // After ad is watched (simulated)
                    setTimeout(() => {
                        // Add reward
                        database.ref(`users/${currentUser.id}/balance`).set(firebase.database.ServerValue.increment(1));
                        database.ref(`users/${currentUser.id}/totalEarned`).set(firebase.database.ServerValue.increment(1));
                        
                        // Reset button
                        watchAdsButton.textContent = 'Watch';
                        watchAdsButton.disabled = false;
                        
                        // Show notification
                        showToast('You earned 1 TRM from watching an ad!');
                    }, 5000);
                } else {
                    showToast('Ad service is not available. Please try again later.');
                }
            });
        }
        
        function loadTasks() {
            const tasksRef = database.ref('tasks');
            
            tasksRef.on('value', (snapshot) => {
                if (snapshot.exists()) {
                    tasks = snapshot.val();
                    renderTasks();
                }
            });
        }
        
        function renderTasks() {
            taskList.innerHTML = '';
            
            Object.values(tasks).forEach(task => {
                const taskCard = document.createElement('div');
                taskCard.className = 'task-card';
                
                // Check if task is completed
                const isCompleted = userData.tasksCompleted.includes(task.id);
                
                taskCard.innerHTML = `
                    <img src="${task.imageUrl}" alt="${task.name}" class="task-image">
                    <div class="task-info">
                        <div class="task-name">${task.name}</div>
                        <div class="task-reward">Reward: ${task.reward} TRM</div>
                        <div class="task-description">${task.description}</div>
                        <button class="task-button ${isCompleted ? 'completed' : ''}" data-task-id="${task.id}" data-task-link="${task.link}" data-task-reward="${task.reward}">
                            ${isCompleted ? 'Completed' : 'Open'}
                        </button>
                    </div>
                `;
                
                taskList.appendChild(taskCard);
            });
            
            // Add event listeners to task buttons
            document.querySelectorAll('.task-button').forEach(button => {
                button.addEventListener('click', handleTaskClick);
            });
        }
        
        function handleTaskClick(event) {
            const button = event.target;
            const taskId = button.getAttribute('data-task-id');
            const taskLink = button.getAttribute('data-task-link');
            const taskReward = parseFloat(button.getAttribute('data-task-reward'));
            
            // Check if task is already completed
            if (button.classList.contains('completed')) {
                // Still open the link
                window.open(taskLink, '_blank');
                return;
            }
            
            // Check if task is already processing
            if (button.classList.contains('processing')) {
                return;
            }
            
            // Update button state
            button.textContent = 'Processing...';
            button.classList.add('processing');
            button.disabled = true;
            
            // Open task link
            window.open(taskLink, '_blank');
            
            // Start processing timer
            setTimeout(() => {
                // Mark task as completed
                button.textContent = 'Completed';
                button.classList.remove('processing');
                button.classList.add('completed');
                
                // Add task to completed list
                const completedTasks = [...userData.tasksCompleted, taskId];
                database.ref(`users/${currentUser.id}/tasksCompleted`).set(completedTasks);
                
                // Add reward to balance
                database.ref(`users/${currentUser.id}/balance`).set(firebase.database.ServerValue.increment(taskReward));
                database.ref(`users/${currentUser.id}/totalEarned`).set(firebase.database.ServerValue.increment(taskReward));
                
                // Show notification
                showToast(`Task completed! You earned ${taskReward} TRM.`);
            }, 10000);
        }
        
        // Setup Leaderboard
        function setupLeaderboard() {
            leaderboardTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Update active tab
                    leaderboardTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Load leaderboard data for selected period
                    const period = tab.getAttribute('data-period');
                    loadLeaderboardData(period);
                });
            });
            
            // Load initial leaderboard data
            loadLeaderboardData('daily');
        }
        
        function loadLeaderboardData(period) {
            let leaderboardRef;
            
            if (period === 'daily') {
                leaderboardRef = database.ref('leaderboard/daily');
            } else if (period === 'weekly') {
                leaderboardRef = database.ref('leaderboard/weekly');
            } else {
                leaderboardRef = database.ref('leaderboard/all');
            }
            
            leaderboardRef.on('value', (snapshot) => {
                if (snapshot.exists()) {
                    leaderboardData = snapshot.val();
                    renderLeaderboard();
                }
            });
        }
        
        function renderLeaderboard() {
            leaderboardList.innerHTML = '';
            
            // Sort users by balance
            const sortedUsers = Object.values(leaderboardData)
                .sort((a, b) => b.balance - a.balance)
                .slice(0, 25);
            
            sortedUsers.forEach((user, index) => {
                const leaderboardItem = document.createElement('div');
                leaderboardItem.className = 'leaderboard-item';
                
                // Highlight current user
                if (user.id === currentUser.id) {
                    leaderboardItem.style.border = `2px solid var(--primary-color)`;
                }
                
                leaderboardItem.innerHTML = `
                    <div class="leaderboard-rank">${index + 1}</div>
                    <img src="${user.photoUrl || 'https://via.placeholder.com/50'}" alt="${user.firstName}" class="leaderboard-avatar">
                    <div class="leaderboard-info">
                        <div class="leaderboard-name">${user.firstName} ${user.lastName}</div>
                        <div class="leaderboard-level">${user.level}</div>
                    </div>
                    <div class="leaderboard-balance">
                        <img src="https://i.postimg.cc/fTQktNmX/maincoin.png" alt="TRM" class="leaderboard-coin">
                        ${user.balance.toFixed(3)}
                    </div>
                `;
                
                leaderboardList.appendChild(leaderboardItem);
            });
        }
        
        // Setup Friends
        function setupFriends() {
            copyReferralButton.addEventListener('click', () => {
                referralLink.select();
                document.execCommand('copy');
                showToast('Referral link copied to clipboard!');
            });
            
            loadFriends();
        }
        
        function loadFriends() {
            if (!userData || !userData.friends.length) {
                friendsList.innerHTML = '<p>No friends yet. Invite your friends to earn TRM!</p>';
                return;
            }
            
            friendsList.innerHTML = '';
            
            userData.friends.forEach(friendId => {
                const friendRef = database.ref(`users/${friendId}`);
                
                friendRef.once('value', (snapshot) => {
                    if (snapshot.exists()) {
                        const friendData = snapshot.val();
                        
                        const friendItem = document.createElement('div');
                        friendItem.className = 'friend-item';
                        
                        friendItem.innerHTML = `
                            <img src="${friendData.photoUrl || 'https://via.placeholder.com/50'}" alt="${friendData.firstName}" class="friend-avatar">
                            <div class="friend-info">
                                <div class="friend-name">${friendData.firstName} ${friendData.lastName}</div>
                                <div class="friend-earned">Earned: ${friendData.balance.toFixed(3)} TRM</div>
                            </div>
                            <div class="friend-bonus">+5000 TRM</div>
                        `;
                        
                        friendsList.appendChild(friendItem);
                    }
                });
            });
        }
        
        // Setup Profile
        function setupProfile() {
            // Profile is updated in updateUI function
        }
        
        // Setup Wallet
        function setupWallet() {
            connectWalletButton.addEventListener('click', async () => {
                try {
                    const wallet = await tonConnectUI.connectWallet();
                    
                    if (wallet) {
                        // Update wallet address in Firebase
                        database.ref(`users/${currentUser.id}/walletAddress`).set(wallet.account.address);
                        
                        // Show notification
                        showToast('Wallet connected successfully!');
                    }
                } catch (error) {
                    console.error('Wallet connection error:', error);
                    showToast('Failed to connect wallet. Please try again.');
                }
            });
            
            copyWalletButton.addEventListener('click', () => {
                if (walletAddress.textContent) {
                    walletAddress.select();
                    document.execCommand('copy');
                    showToast('Wallet address copied to clipboard!');
                }
            });
            
            disconnectWalletButton.addEventListener('click', async () => {
                try {
                    await tonConnectUI.disconnect();
                    
                    // Clear wallet address in Firebase
                    database.ref(`users/${currentUser.id}/walletAddress`).set(null);
                    
                    // Show notification
                    showToast('Wallet disconnected!');
                } catch (error) {
                    console.error('Wallet disconnection error:', error);
                    showToast('Failed to disconnect wallet. Please try again.');
                }
            });
        }
        
        // Setup Settings
        function setupSettings() {
            notificationsToggle.addEventListener('click', () => {
                const isActive = notificationsToggle.classList.toggle('active');
                database.ref(`users/${currentUser.id}/settings/notifications`).set(isActive);
                showToast(`Notifications ${isActive ? 'enabled' : 'disabled'}`);
            });
            
            soundToggle.addEventListener('click', () => {
                const isActive = soundToggle.classList.toggle('active');
                database.ref(`users/${currentUser.id}/settings/sound`).set(isActive);
                showToast(`Sound effects ${isActive ? 'enabled' : 'disabled'}`);
            });
            
            autoFarmingToggle.addEventListener('click', () => {
                const isActive = autoFarmingToggle.classList.toggle('active');
                database.ref(`users/${currentUser.id}/settings/autoFarming`).set(isActive);
                showToast(`Auto farming ${isActive ? 'enabled' : 'disabled'}`);
            });
        }
        
        // Show Toast Notification
        function showToast(message) {
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
